/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/js/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/js/AllPipes.js":
/*!****************************!*\
  !*** ./src/js/AllPipes.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Pipe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Pipe */ \"./src/js/Pipe.js\");\n/* harmony import */ var _Queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Queue */ \"./src/js/Queue.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar distanceBetweenPipes = 220;\n/** Stores a Queue of pipes in game state, which adds to tail and removes from head. */\n\nvar AllPipes =\n/*#__PURE__*/\nfunction () {\n  function AllPipes() {\n    _classCallCheck(this, AllPipes);\n\n    this.pipes = new _Queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n\n    for (var idx = 0; idx < 3; idx++) {\n      this.pipes.enqueue(new _Pipe__WEBPACK_IMPORTED_MODULE_0__[\"default\"]((idx + 2) * distanceBetweenPipes));\n    }\n  }\n  /** If pipe is off screen, remove and add a new one to tail. */\n\n\n  _createClass(AllPipes, [{\n    key: \"tick\",\n    value: function tick() {\n      var curPipe = this.pipes.head;\n\n      while (curPipe) {\n        curPipe.data.tick();\n        curPipe = curPipe.next;\n      }\n\n      if (this.pipes.head.data.x < -this.pipes.head.data.pipeWidth) {\n        this.pipes.enqueue(new _Pipe__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.pipes.tail.data.x + distanceBetweenPipes));\n        this.pipes.dequeue();\n      }\n    }\n    /** Draw all the pipes. */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var curPipe = this.pipes.head;\n\n      while (curPipe) {\n        curPipe.data.render();\n        curPipe = curPipe.next;\n      }\n    }\n  }]);\n\n  return AllPipes;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AllPipes);\n\n//# sourceURL=webpack:///./src/js/AllPipes.js?");

/***/ }),

/***/ "./src/js/Bird.js":
/*!************************!*\
  !*** ./src/js/Bird.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _NeuralNetwork__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NeuralNetwork */ \"./src/js/NeuralNetwork.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n // Static variables\n\nvar img = document.createElement('IMG');\nimg.setAttribute('src', 'img/blue-bird.png');\nvar gravity = 0.5;\nvar toRadians = Math.PI / 360;\n/**\n * Helper function for normalizing ranges from 1 range to another.\n * @param {*} value Value in start range to be transformed / scaled to second range\n * @param {*} start1 Start value of first range\n * @param {*} stop1 End value of first range\n * @param {*} start2 Start value of second range\n * @param {*} stop2 End value of second range\n */\n\nfunction constrainRange(value, start1, stop1, start2, stop2) {\n  var range1 = stop1 - start1,\n      range2 = stop2 - start2,\n      relativePosition = (value - start1) / range1; // 10\n\n  return relativePosition * range2 + start2;\n}\n\nfunction sigmoid(x) {\n  return 1 / (1 + Math.pow(Math.E, -x));\n} // Standard Normal variate using Box-Muller transform. Similar values to random\n// Gausian standard distribution.\n\n\nfunction randomBoxMuller() {\n  var u = 0,\n      v = 0;\n\n  while (u === 0) {\n    u = Math.random();\n  } //Converting [0,1) to (0,1)\n\n\n  while (v === 0) {\n    v = Math.random();\n  }\n\n  var num = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);\n  num = num / 10.0 + 0.5; // Translate to 0 -> 1\n\n  return num > 1 || num < 0 ? randomBoxMuller() : num; // resample between 0 and 1\n} // Mutation function to be passed into bird.brain\n\n\nfunction mutate(x) {\n  if (Math.random(1) < 1 - sigmoid(currGeneration / mutationRateMultiplier)) {\n    var offset = randomBoxMuller() * 0.5;\n    var newx = x + offset;\n    return newx;\n  } else {\n    return x;\n  }\n}\n\nvar Bird =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Constructor with default values of 50 for x and y.\n   * @param {number} x\n   * @param {mumber} y\n   */\n  function Bird(brain) {\n    _classCallCheck(this, Bird);\n\n    this.x = 20;\n    this.y = height / 2;\n    this.imgHeight = 30;\n    this.imgWidth = 40;\n    this.yMax = height - this.imgHeight;\n    this.lift = -25;\n    this.velocity = 0;\n    this.hitboxCoords = {\n      topLeft: {\n        x: 0,\n        y: 0\n      },\n      topRight: {\n        x: 0,\n        y: 0\n      },\n      bottomRight: {\n        x: 0,\n        y: 0\n      },\n      bottomLeft: {\n        x: 0,\n        y: 0\n      } // Is this a copy of another Bird or a new one?\n      // The Neural Network is the bird's \"brain\"\n\n    };\n\n    if (brain instanceof _NeuralNetwork__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n      this.brain = brain.copy();\n      this.brain.mutate(mutate);\n    } else {\n      this.brain = new _NeuralNetwork__WEBPACK_IMPORTED_MODULE_0__[\"default\"](11, numHiddenLayers, 2);\n    } // Score is how many frames it's been alive\n\n\n    this.score = 0; // Fitness is normalized version of score\n\n    this.fitness = 0;\n  }\n\n  _createClass(Bird, [{\n    key: \"copy\",\n    value: function copy() {\n      return new Bird(this.brain);\n    } // This is the key function now that decides\n    // if it should jump or not jump!\n\n  }, {\n    key: \"think\",\n    value: function think(pipes) {\n      var headData = pipes.head.data,\n          secondData = pipes.head.next.data,\n          beforeLeftFirstPipe = this.x < headData.x; // if (x is true) ? then execute this : else this\n      // need to calculate topy and bottom y of next 3 vertical lines with pipe\n\n      var closest = beforeLeftFirstPipe ? headData : {\n        x: headData.x + 80,\n        yTop: headData.yTop,\n        yBottom: headData.yBottom\n      };\n      var secondClosest = beforeLeftFirstPipe ? {\n        x: headData.x + 80,\n        yTop: headData.yTop,\n        yBottom: headData.yBottom\n      } : secondData;\n      var thirdClosest = beforeLeftFirstPipe ? secondData : {\n        x: secondData.x + 80,\n        yTop: secondData.yTop,\n        yBottom: secondData.yBottom\n      }; // Now create the inputs to the neural network\n\n      var inputs = []; // Inputs are the x, yTop, and yBottom of closest 3 pipes, as well\n      // As bird's velocity and y position.\n\n      inputs[0] = constrainRange(closest.x, this.x, width, 0, 1);\n      inputs[1] = constrainRange(closest.yTop, 0, height, 0, 1);\n      inputs[2] = constrainRange(closest.yBottom, 0, height, 0, 1);\n      inputs[3] = constrainRange(secondClosest.x, this.x, width, 0, 1);\n      inputs[4] = constrainRange(secondClosest.yTop, 0, height, 0, 1);\n      inputs[5] = constrainRange(secondClosest.yBottom, 0, height, 0, 1);\n      inputs[6] = constrainRange(thirdClosest.x, this.x, width, 0, 1);\n      inputs[7] = constrainRange(thirdClosest.yTop, 0, height, 0, 1);\n      inputs[8] = constrainRange(thirdClosest.yBottom, 0, height, 0, 1);\n      inputs[9] = constrainRange(this.y, 0, height, 0, 1);\n      inputs[10] = constrainRange(this.velocity, -10, 10, 0, 1);\n      var action = this.brain.predict(inputs);\n      if (action[1] > action[0]) this.flyUp();\n    }\n  }, {\n    key: \"flyUp\",\n    value: function flyUp() {\n      this.velocity -= 15; // Negative velocity makes y decrease, and bird go up.\n    }\n    /**\n     * Add gravity, and then check to see if hitting wall. Don't let the bird\n     * fly out of bounds.\n     */\n\n  }, {\n    key: \"tick\",\n    value: function tick() {\n      this.score++;\n      this.velocity += gravity;\n      this.y += this.velocity;\n      if (this.y <= 0) this.y = 0;\n    }\n  }, {\n    key: \"getRotationAngle\",\n    value: function getRotationAngle() {\n      var number = Math.min(Math.max(parseInt(this.velocity), -12), 6);\n      return toRadians * number * 12;\n    }\n    /** Draw a flappy ol' bird at the current position */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var centerX = this.x + this.imgWidth / 2,\n          centerY = this.y + this.imgHeight / 2;\n      context.save();\n      context.translate(centerX, centerY);\n      context.rotate(this.getRotationAngle());\n      context.drawImage(img, 0, 0, this.imgWidth, this.imgHeight);\n      context.restore();\n    }\n  }]);\n\n  return Bird;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Bird);\n\n//# sourceURL=webpack:///./src/js/Bird.js?");

/***/ }),

/***/ "./src/js/CloudFunctionCalls.js":
/*!**************************************!*\
  !*** ./src/js/CloudFunctionCalls.js ***!
  \**************************************/
/*! exports provided: addGenerationStats, addKeyVariableStats */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addGenerationStats\", function() { return addGenerationStats; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addKeyVariableStats\", function() { return addKeyVariableStats; });\nvar Http = new XMLHttpRequest(),\n    baseURL = 'https://us-central1-flappy-server.cloudfunctions.net/',\n    addGenerationStatsUrl = \"\".concat(baseURL, \"add-generation-stats\"),\n    addKeyVariableStatsUrl = \"\".concat(baseURL, \"add-key-variable-stats\");\n\nHttp.onreadystatechange = function () {\n  return console.log(Http.responseText);\n};\n\nfunction addGenerationStats(interaction, epochNumber, epochScore) {\n  var postData = {\n    interaction: interaction,\n    epochNumber: epochNumber,\n    epochScore: epochScore\n  };\n  Http.open(\"POST\", addGenerationStatsUrl, false); // force synchronous\n\n  Http.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n  Http.send(JSON.stringify(postData));\n}\nfunction addKeyVariableStats(interaction) {\n  var postData = {\n    interaction: interaction,\n    learningRate: learningRate,\n    mutationRateMultiplier: mutationRateMultiplier,\n    numHiddenLayers: numHiddenLayers\n  };\n  Http.open(\"POST\", addKeyVariableStatsUrl, false); // force synchronous\n\n  Http.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n  Http.send(JSON.stringify(postData));\n}\n\n//# sourceURL=webpack:///./src/js/CloudFunctionCalls.js?");

/***/ }),

/***/ "./src/js/Matrix.js":
/*!**************************!*\
  !*** ./src/js/Matrix.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n* Checkout Chapter 10 of Nature of Code by Daniel \"Coding Train\" Shiffman, on\n* Neural Networks. https://natureofcode.com/book/chapter-10-neural-networks/\n* https://github.com/CodingTrain/Toy-Neural-Network-JS/blob/master/lib/matrix.js\n*/\nvar Matrix =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param {number} rows\n   * @param {number} cols\n   */\n  function Matrix(rows, cols) {\n    var _this = this;\n\n    _classCallCheck(this, Matrix);\n\n    this.rows = rows;\n    this.cols = cols;\n    this.data = Array(this.rows).fill().map(function () {\n      return Array(_this.cols).fill(0);\n    });\n  }\n  /** Return a new matrix with copied values */\n\n\n  _createClass(Matrix, [{\n    key: \"copy\",\n    value: function copy() {\n      var m = new Matrix(this.rows, this.cols);\n      m.data = this.data.map(function (row) {\n        return row.map(function (cell) {\n          return cell;\n        });\n      });\n      return m;\n    }\n    /**\n     * @param {Array} arr\n     * @returns Matrix which is a vector from @param arr\n     */\n\n  }, {\n    key: \"toArray\",\n\n    /** @returns Flattened 2D array into linear 1D vector. */\n    value: function toArray() {\n      var arr = [];\n      this.data.forEach(function (row) {\n        return row.forEach(function (cell) {\n          return arr.push(cell);\n        });\n      });\n      return arr;\n    }\n  }, {\n    key: \"randomize\",\n    value: function randomize() {\n      return this.map(function (e) {\n        return Math.random() * 2 - 1;\n      });\n    }\n    /**\n     * @param {Matrix} n\n     * @returns New matrix with @param n matrix added to instance matrix.\n     */\n\n  }, {\n    key: \"add\",\n    value: function add(n) {\n      if (n instanceof Matrix) {\n        if (this.rows !== n.rows || this.cols !== n.cols) {\n          console.log('Columns and Rows of A must match Columns and Rows of B.');\n          return;\n        }\n\n        return this.map(function (e, i, j) {\n          return e + n.data[i][j];\n        });\n      } else {\n        return this.map(function (e) {\n          return e + n;\n        });\n      }\n    }\n    /**\n     * @param {Matrix} matrix\n     * @returns The transposition of the current Matrix\n     */\n\n  }, {\n    key: \"multiply\",\n\n    /**\n     * If n instanceof Matrix, and rows/cols are equal return hadamard\n     * product (multiply each element). Else, n is a number (scalar) and multiply\n     * each element by n.\n     * @param {number || Matrix} n\n     * @returns Hadamard or scalar product.\n     */\n    value: function multiply(n) {\n      if (n instanceof Matrix) {\n        if (this.rows !== n.rows || this.cols !== n.cols) {\n          console.log('Columns and Rows of A must match Columns and Rows of B.');\n          return;\n        }\n\n        return this.map(function (e, i, j) {\n          return e * n.data[i][j];\n        }); // hadamard product\n      } else {\n        return this.map(function (e) {\n          return e * n;\n        }); // Scalar product\n      }\n    }\n    /**\n     * Apply a function to every element of matrix. Instance method.\n     * @param {function} func\n     */\n\n  }, {\n    key: \"map\",\n    value: function map(func) {\n      this.data = this.data.map(function (row, i) {\n        return row.map(function (cell, j) {\n          return func(cell, i, j);\n        });\n      });\n      return this;\n    }\n    /**\n     * // Apply a function to every element of matrix. Static method.\n     * @param {Matrix} matrix\n     * @param {function} func\n     */\n\n  }, {\n    key: \"print\",\n\n    /** Get some pretty printed output of n x m matrix as table */\n    value: function print() {\n      console.table(this.data);\n      return this;\n    }\n    /** Serialize object into JSON string representation */\n\n  }, {\n    key: \"serialize\",\n    value: function serialize() {\n      return JSON.stringify(this);\n    }\n    /**\n     * Parse JSON object into Matrix object.\n     * @param {String} data\n     */\n\n  }], [{\n    key: \"fromArray\",\n    value: function fromArray(arr) {\n      return new Matrix(arr.length, 1).map(function (e, i) {\n        return arr[i];\n      });\n    }\n    /**\n     * @param {Matrix} a\n     * @param {Matrix} b\n     * @returns new Matrix, element wise, a - b.\n     */\n\n  }, {\n    key: \"subtract\",\n    value: function subtract(a, b) {\n      if (a.rows !== b.rows || a.cols !== b.cols) {\n        console.log('Columns and Rows of A must match Columns and Rows of B.');\n        return;\n      }\n\n      return new Matrix(a.rows, a.cols).map(function (_, i, j) {\n        return a.data[i][j] - b.data[i][j];\n      });\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose(matrix) {\n      return new Matrix(matrix.cols, matrix.rows).map(function (_, i, j) {\n        return matrix.data[j][i];\n      });\n    }\n    /**\n     * Matrix product.\n     * @param {Matrix} a\n     * @param {Matrix} b\n     */\n\n  }, {\n    key: \"multiply\",\n    value: function multiply(a, b) {\n      // Matrix product\n      if (a.cols !== b.rows) {\n        console.log('Columns of A must match rows of B.');\n        return;\n      }\n\n      return new Matrix(a.rows, b.cols).map(function (e, i, j) {\n        // Dot product of values in col\n        var sum = 0;\n\n        for (var k = 0; k < a.cols; k++) {\n          sum += a.data[i][k] * b.data[k][j];\n        }\n\n        return sum;\n      });\n    }\n  }, {\n    key: \"map\",\n    value: function map(matrix, func) {\n      return new Matrix(matrix.rows, matrix.cols).map(function (e, i, j) {\n        return func(matrix.data[i][j], i, j);\n      });\n    }\n  }, {\n    key: \"deserialize\",\n    value: function deserialize(data) {\n      if (typeof data == 'string') {\n        data = JSON.parse(data);\n      }\n\n      var matrix = new Matrix(data.rows, data.cols);\n      matrix.data = data.data;\n      return matrix;\n    }\n  }]);\n\n  return Matrix;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Matrix);\n\n//# sourceURL=webpack:///./src/js/Matrix.js?");

/***/ }),

/***/ "./src/js/NeuralNetwork.js":
/*!*********************************!*\
  !*** ./src/js/NeuralNetwork.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Matrix */ \"./src/js/Matrix.js\");\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Checkout Chapter 10 of Nature of Code by Daniel \"Coding Train\" Shiffman, on\n * Neural Networks. https://natureofcode.com/book/chapter-10-neural-networks/\n * https://github.com/CodingTrain/Toy-Neural-Network-JS/blob/master/lib/nn.js\n */\n\n\nvar ActivationFunction = function ActivationFunction(func, dfunc) {\n  _classCallCheck(this, ActivationFunction);\n\n  this.func = func;\n  this.dfunc = dfunc;\n};\n\nvar sigmoid = new ActivationFunction(function (x) {\n  return 1 / (1 + Math.exp(-x));\n}, function (y) {\n  return y * (1 - y);\n});\nvar tanh = new ActivationFunction(function (x) {\n  return Math.tanh(x);\n}, function (y) {\n  return 1 - y * y;\n});\n\nvar NeuralNetwork =\n/*#__PURE__*/\nfunction () {\n  /**\n   * if first argument is a NeuralNetwork the constructor clones it\n   * USAGE: cloned_nn = new NeuralNetwork(to_clone_nn);\n   * @param {number || NeuralNetwork} in_nodes\n   * @param {number || undefined} hid_nodes\n   * @param {number || undefined} out_nodes\n   */\n  function NeuralNetwork(in_nodes, hid_nodes, out_nodes) {\n    _classCallCheck(this, NeuralNetwork);\n\n    if (in_nodes instanceof NeuralNetwork) {\n      var a = in_nodes;\n      this.input_nodes = a.input_nodes;\n      this.hidden_nodes = a.hidden_nodes;\n      this.output_nodes = a.output_nodes;\n      this.weights_ih = a.weights_ih.copy();\n      this.weights_ho = a.weights_ho.copy();\n      this.bias_h = a.bias_h.copy();\n      this.bias_o = a.bias_o.copy();\n    } else {\n      this.input_nodes = in_nodes;\n      this.hidden_nodes = hid_nodes;\n      this.output_nodes = out_nodes;\n      this.weights_ih = new _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.hidden_nodes, this.input_nodes);\n      this.weights_ho = new _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.output_nodes, this.hidden_nodes);\n      this.weights_ih.randomize();\n      this.weights_ho.randomize();\n      this.bias_h = new _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.hidden_nodes, 1);\n      this.bias_o = new _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.output_nodes, 1);\n      this.bias_h.randomize();\n      this.bias_o.randomize();\n    } // TODO: copy these as well\n\n\n    this.setLearningRate();\n    this.setActivationFunction();\n  }\n  /**\n   * Generate the hidden outputs.\n   * @param {Array} input_array\n   */\n\n\n  _createClass(NeuralNetwork, [{\n    key: \"predict\",\n    value: function predict(input_array) {\n      var inputs = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].fromArray(input_array);\n      var hidden = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this.weights_ih, inputs);\n      hidden.add(this.bias_h);\n      hidden.map(this.activation_function.func); // activation function!\n      // Generating the output's output.\n\n      var output = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this.weights_ho, hidden);\n      output.add(this.bias_o);\n      output.map(this.activation_function.func);\n      return output.toArray(); // Sending back to the caller\n    }\n    /**\n     * Set learning rate. Default value is window.learningRate.\n     * @param {number} learning_rate Between 0 and 1\n     */\n\n  }, {\n    key: \"setLearningRate\",\n    value: function setLearningRate() {\n      var learning_rate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.learningRate;\n      this.learning_rate = learning_rate;\n    }\n    /**\n     * Set activation function. Default value is sigmoid, but tanh is also an option.\n     * @param {function} func\n     */\n\n  }, {\n    key: \"setActivationFunction\",\n    value: function setActivationFunction() {\n      var func = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : sigmoid;\n      this.activation_function = func;\n    }\n    /**\n     * 1. Calculate outputs first.\n     * 2. Then, calculate the errors and apply the gradients.\n     * 3. Calculate the deltas and adjust the weights and bias by deltas.\n     * 4. Calculate hidden errors, gradient and how inputs are affected by hidden deltas.\n     * 5. Adjust the bias by the deltas (which is just the gradients)\n     * @param {*} input_array\n     * @param {*} target_array\n     */\n\n  }, {\n    key: \"train\",\n    value: function train(input_array, target_array) {\n      var inputs = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].fromArray(input_array); // 1. Generating the Hidden Outputs\n\n      var hidden = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this.weights_ih, inputs);\n      hidden.add(this.bias_h);\n      hidden.map(this.activation_function.func); // Generating the output's output\n\n      var outputs = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this.weights_ho, hidden);\n      outputs.add(this.bias_o);\n      outputs.map(this.activation_function.func);\n      var targets = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].fromArray(target_array); // Convert array to matrix object\n      // 2. Calculate the error. ERROR = TARGETS - OUTPUTS\n\n      var output_errors = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(targets, outputs); // let gradient = outputs * (1 - outputs); Calculate gradient\n\n      var gradients = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(outputs, this.activation_function.dfunc);\n      gradients.multiply(output_errors);\n      gradients.multiply(this.learning_rate); // 3. Calculate deltas\n\n      var hidden_T = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transpose(hidden);\n      var weight_ho_deltas = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(gradients, hidden_T); // Adjust the weights by deltas\n\n      this.weights_ho.add(weight_ho_deltas); // Adjust the bias by its deltas (which is just the gradients)\n\n      this.bias_o.add(gradients); // 4. Calculate the hidden layer errors\n\n      var who_t = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transpose(this.weights_ho);\n      var hidden_errors = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(who_t, output_errors); // Calculate hidden gradient\n\n      var hidden_gradient = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(hidden, this.activation_function.dfunc);\n      hidden_gradient.multiply(hidden_errors);\n      hidden_gradient.multiply(this.learning_rate); // Calcuate input -> hidden deltas\n\n      var inputs_T = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transpose(inputs);\n      var weight_ih_deltas = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(hidden_gradient, inputs_T);\n      this.weights_ih.add(weight_ih_deltas); // 5. Adjust the bias by its deltas (which is just the gradients)\n\n      this.bias_h.add(hidden_gradient);\n    }\n    /** @returns Stringified object representation of NeuralNetwork */\n\n  }, {\n    key: \"serialize\",\n    value: function serialize() {\n      return JSON.stringify(this);\n    }\n    /**\n     * Parse JSON stringify'd object into Neural Network.\n     * @param {*} data\n     */\n\n  }, {\n    key: \"copy\",\n\n    /** @returns New mutated neural network. */\n    value: function copy() {\n      return new NeuralNetwork(this);\n    }\n    /**\n     * Apply a mutation function to weights and bias for Neural Network.\n     * @param {function} func\n     */\n\n  }, {\n    key: \"mutate\",\n    value: function mutate(func) {\n      this.weights_ih.map(func);\n      this.weights_ho.map(func);\n      this.bias_h.map(func);\n      this.bias_o.map(func);\n    }\n  }], [{\n    key: \"deserialize\",\n    value: function deserialize(data) {\n      if (typeof data == \"string\") data = JSON.parse(data);\n      var nn = new NeuralNetwork(data.input_nodes, data.hidden_nodes, data.output_nodes);\n      nn.weights_ih = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deserialize(data.weights_ih); // Inner to hidden\n\n      nn.weights_ho = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deserialize(data.weights_ho); // Hidden to outer\n\n      nn.bias_h = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deserialize(data.bias_h); // Hidden bias\n\n      nn.bias_o = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deserialize(data.bias_o); // Outer bias\n\n      nn.learning_rate = data.learning_rate;\n      return nn;\n    }\n  }]);\n\n  return NeuralNetwork;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (NeuralNetwork);\n\n//# sourceURL=webpack:///./src/js/NeuralNetwork.js?");

/***/ }),

/***/ "./src/js/Pipe.js":
/*!************************!*\
  !*** ./src/js/Pipe.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar spaceBetweenPipe = 180;\nvar distanceOffWall = 120;\nvar img = document.createElement('IMG');\nimg.setAttribute('src', 'img/pipe.png');\n/** @returns random yTop and yBottom seperated by spaceBetweenPipe */\n\nfunction generateRandomSpawns() {\n  var randY = Math.random() * (height - 2 * distanceOffWall - spaceBetweenPipe) + distanceOffWall;\n  return {\n    yTop: randY,\n    yBottom: randY + spaceBetweenPipe\n  };\n}\n/** Those little green things you see moving across the screen. Consists of\n * data to support 1 vertical set of pipes, 1 top and 1 bottom.\n */\n\n\nvar Pipe =\n/*#__PURE__*/\nfunction () {\n  function Pipe(x) {\n    _classCallCheck(this, Pipe);\n\n    this.x = x;\n\n    var _generateRandomSpawns = generateRandomSpawns(),\n        yTop = _generateRandomSpawns.yTop,\n        yBottom = _generateRandomSpawns.yBottom;\n\n    this.yTop = yTop;\n    this.yBottom = yBottom;\n    this.pipeWidth = 80;\n  }\n  /** Move left by 1. */\n\n\n  _createClass(Pipe, [{\n    key: \"tick\",\n    value: function tick() {\n      this.x -= 2;\n    }\n    /** Draw both top and bottom pipe. Top pipe is rotated and flipped */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      context.save();\n      context.translate(this.x, this.yTop);\n      context.scale(-1, 1);\n      context.rotate(Math.PI);\n      context.drawImage(img, 0, 0, this.pipeWidth, 500);\n      context.restore();\n      context.drawImage(img, this.x, this.yBottom, this.pipeWidth, 500);\n    }\n  }]);\n\n  return Pipe;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Pipe);\n\n//# sourceURL=webpack:///./src/js/Pipe.js?");

/***/ }),

/***/ "./src/js/Queue.js":
/*!*************************!*\
  !*** ./src/js/Queue.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/** For storing data, in this case a pipe. */\nvar Node = function Node(data, prev, next) {\n  _classCallCheck(this, Node);\n\n  this.data = data;\n  this.prev = prev;\n  this.next = next;\n};\n/** Doubly linked list which adds to the tail and removes from the head. */\n\n\nvar Queue =\n/*#__PURE__*/\nfunction () {\n  function Queue() {\n    _classCallCheck(this, Queue);\n\n    this.head;\n    this.tail;\n    this.size = 0;\n  }\n  /**\n   * Add to the end\n   * @param {*} data a Poipe\n   */\n\n\n  _createClass(Queue, [{\n    key: \"enqueue\",\n    value: function enqueue(data) {\n      this.size++;\n\n      if (!this.tail) {\n        var newNode = new Node(data, null, null);\n        this.head = newNode;\n        this.tail = newNode;\n      } else {\n        var _newNode = new Node(data, this.tail, null);\n\n        this.tail.next = _newNode;\n        this.tail = _newNode;\n      }\n    }\n    /** Remove from the front */\n\n  }, {\n    key: \"dequeue\",\n    value: function dequeue() {\n      if (!this.head) return; // empty\n\n      this.size--;\n\n      if (this.head === this.tail) {\n        // one element\n        this.head = undefined; // check with null\n\n        this.tail = undefined; // check with null\n\n        return;\n      }\n\n      this.head = this.head.next;\n      this.head.prev = undefined;\n    }\n  }]);\n\n  return Queue;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Queue);\n\n//# sourceURL=webpack:///./src/js/Queue.js?");

/***/ }),

/***/ "./src/js/index.js":
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
/*! exports provided: nextGeneration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"nextGeneration\", function() { return nextGeneration; });\n/* harmony import */ var _Bird__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Bird */ \"./src/js/Bird.js\");\n/* harmony import */ var _AllPipes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AllPipes */ \"./src/js/AllPipes.js\");\n/* harmony import */ var _CloudFunctionCalls__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CloudFunctionCalls */ \"./src/js/CloudFunctionCalls.js\");\n/**\n * Loads all the necessary JavaScript for game state, and handles creating\n * new generations. Each bird has a Neural Network, and new generations (epochs)\n * are created using the Genetic Algorithm. Used Daniel Shiffman's library for\n * NN and GA.\n * @author pkrisko <patrick.krisko@gmail.com>\n * @author jofsky <josh.kofksy@gmail.com>\n */\n\n\n // Global variables\n\nwindow.canvas = document.getElementById('canvas');\nwindow.context = canvas.getContext(\"2d\");\nwindow.width = Math.min(window.innerWidth, 420); // ðŸŒ´\n\nwindow.height = width * 1.5; // uses the width directly above.\n\nwindow.currGeneration = 1;\nwindow.floorHeight = 70; // Variables that heavily affect how well the birds learn.\n\nwindow.learningRate = .1;\nwindow.mutationRateMultiplier = 4.2;\nwindow.numHiddenLayers = 11;\nvar variableSets = [[.1, 4.2, 11], // base\n[.25, 4.2, 11], // learning rate\n[.35, 4.2, 11], // learning rate\n[.5, 4.2, 11], // learning rate\n[.1, 3.7, 11], // Mutation rate mult\n[.1, 5, 11], // mutation rate mult\n[.1, 4.2, 6], // Hidden layers\n[.1, 4.2, 8], // Hidden layers\n[.1, 4.2, 12] // Hidden layers\n]; // File scoped constants\n\nvar maxFPS = 100; // set to 10 and watch what happens\n\nvar maxBirdsRendered = 20;\nvar maxScoreAllowed = 200; // File scoped variables\n\nvar allPipes;\nvar currentTick;\nvar score;\nvar highScore;\nvar lastFrameTimeMs;\nvar totalPopulation = 4000; // Total birds in each generation\n\nvar activeBirds; // All active birds (not yet collided with pipe)\n\nvar allBirds; // All birds for any given population\n\nvar interaction;\nvar interactionsCount = 0; // File scoped images\n\nvar backgroundImg = document.createElement('IMG');\nbackgroundImg.setAttribute('src', 'img/background.png');\nvar floorImg = document.createElement('IMG');\nfloorImg.setAttribute('src', 'img/floor.png');\n/** Create a population and set initial game state. Immideiately invoked IIFE */\n\nfunction setup() {\n  if (score >= maxScoreAllowed) Object(_CloudFunctionCalls__WEBPACK_IMPORTED_MODULE_2__[\"addGenerationStats\"])(interaction, currGeneration, score); // Make ajax call.\n\n  var variableSetsIdx = Math.floor(interactionsCount / 1);\n  if (variableSetsIdx >= variableSets.length) throw new Error(\"Your watch has ended\"); // Set key variables of interest\n\n  window.learningRate = variableSets[variableSetsIdx][0];\n  window.mutationRateMultiplier = variableSets[variableSetsIdx][1];\n  window.numHiddenLayers = variableSets[variableSetsIdx][2]; // Reset variables for this interaction\n\n  score = 0;\n  highScore = 0;\n  currentTick = 0;\n  lastFrameTimeMs = 0;\n  activeBirds = [];\n  allBirds = [];\n  currGeneration = 1;\n  interaction = (+new Date()).toString(16).toUpperCase();\n  interactionsCount++;\n\n  for (var i = 0; i < totalPopulation; i++) {\n    var bird = new _Bird__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    activeBirds[i] = bird;\n    allBirds[i] = bird;\n  }\n\n  allPipes = new _AllPipes__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n  window.requestAnimationFrame(mainLoop);\n  Object(_CloudFunctionCalls__WEBPACK_IMPORTED_MODULE_2__[\"addKeyVariableStats\"])(interaction);\n}\n\nsetup();\n/**\n * Heartbeat of the game. Update and draw the game 100 times a second.\n * @param {number} timestamp\n */\n\nfunction mainLoop(timestamp) {\n  if (timestamp < lastFrameTimeMs + 1000 / maxFPS) {\n    window.requestAnimationFrame(mainLoop);\n    return;\n  }\n\n  lastFrameTimeMs = timestamp;\n  tick(); // update game state FIRST\n  // render(); for now, don't render\n\n  window.requestAnimationFrame(mainLoop);\n}\n/**\n * @param {Bird} bird\n * @param {Pipe} pipe\n * @returns True if bird is touching any pipe in the queue.\n */\n\n\nfunction touchingPipe(bird, pipe) {\n  var xIsIntersecting = bird.x - 7.5 + bird.imgWidth >= pipe.x && bird.x - 7.5 + bird.imgWidth <= pipe.x + pipe.pipeWidth,\n      yIsIntersecting = bird.y + 11 < pipe.yTop || bird.y + 23 + bird.imgHeight > pipe.yBottom;\n  return xIsIntersecting && yIsIntersecting;\n}\n/**\n * @param {Bird} bird\n * @returns True if bird touching pipe or fallen past floor of the map.\n */\n\n\nfunction isDead(bird) {\n  var firstPipe = allPipes.pipes.head.data,\n      secondPipe = allPipes.pipes.head.next.data;\n  return bird.y + bird.imgHeight > height - floorHeight || touchingPipe(bird, firstPipe) || touchingPipe(bird, secondPipe);\n}\n/** Update the current state of the game */\n\n\nfunction tick() {\n  if (activeBirds.length > 0 && score < maxScoreAllowed) {\n    var firstBird = activeBirds[0];\n    currentTick = firstBird.score;\n\n    if (Math.abs(firstBird.x + firstBird.imgWidth - (allPipes.pipes.head.data.x + allPipes.pipes.head.data.pipeWidth)) < 2) {\n      if (++score >= highScore) highScore = score;\n      if (score % 5 == 0) console.log(\"\\t\\u2022 \".concat(score, \" Birds Alive: \").concat(activeBirds.length, \" (%\").concat((activeBirds.length / totalPopulation * 100).toFixed(2), \")\"));\n    }\n  } else {\n    nextGeneration(score >= maxScoreAllowed);\n    return;\n  }\n\n  for (var i = activeBirds.length - 1; i >= 0; i--) {\n    var bird = activeBirds[i];\n    bird.think(allPipes.pipes); // Use bird brain\n\n    bird.tick();\n\n    if (isDead(bird)) {\n      // If dead, get yeeted.\n      activeBirds.splice(i, 1);\n    }\n  }\n\n  allPipes.tick();\n}\n/** Render on top information about the current generation / game's state */\n\n\nfunction drawGameInfo() {\n  context.font = '48px sans-serif';\n  context.fillStyle = \"#fff\";\n  context.fillText(score, width - 150, 80);\n  context.font = '24px sans-serif';\n  context.fillText(\"Gen: \".concat(currGeneration), width - 150, 30);\n  context.fillText(\"\".concat(activeBirds.length, \" birds\"), width - 150, 110);\n  context.fillText(\"Top: \".concat(highScore), width - 150, 140);\n}\n/** Draw the current state of the world. */\n\n\nfunction render() {\n  context.drawImage(backgroundImg, 0, 0, width, height);\n\n  for (var idx = 0; idx < maxBirdsRendered && idx < activeBirds.length; idx++) {\n    activeBirds[idx].render();\n  }\n\n  allPipes.render(); // % 20, because every 20 pixels the image repeats. Creates seamless animation.\n\n  context.drawImage(floorImg, currentTick % 20, 0, width, floorHeight, 0, height - floorHeight, width, floorHeight);\n  drawGameInfo(); // Draw text with current game status.\n} // Listen for clicks on desktop. touchstart on mobile\n\n\nwindow.addEventListener('keyup', function (event) {// if (event.keyCode === 32) // Spacebar\n  //     bird.flyUp();\n});\nwindow.addEventListener('touchstart', function () {// bird.flyUp();\n}); // resize the canvas to fill browser window dynamically\n\nwindow.addEventListener('resize', resizeCanvas, false);\n\nfunction resizeCanvas() {\n  canvas.width = width;\n  canvas.height = height;\n}\n\nresizeCanvas(); // var audio = new Audio('http://files2.earmilk.com/upload/mp3/2012-04/Theophilus%20London%20Ft%20ASAP%20Rocky-Big%20Spender.mp3?_ga=2.259002762.1018058977.1556944267-758562653.1556944266');\n// setTimeout(() => {\n//     // audio.play();\n// }, 500);\n// Code for creating new generations..\n\n/** Start the game over. */\n\nfunction resetGame() {\n  Object(_CloudFunctionCalls__WEBPACK_IMPORTED_MODULE_2__[\"addGenerationStats\"])(interaction, currGeneration++, score); // Make ajax call.\n\n  score = 0;\n  allPipes = new _AllPipes__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n  window.requestAnimationFrame(mainLoop);\n}\n/** Create the next generation */\n\n\nfunction nextGeneration(maxScoreReached) {\n  if (currGeneration >= 30 || maxScoreReached) {\n    setup();\n    return;\n  }\n\n  resetGame();\n  normalizeFitness(allBirds); // Normalize the fitness values 0-1\n\n  activeBirds = generate(allBirds); // Generate a new set of birds\n\n  allBirds = activeBirds.slice(); // Copy those birds to another array\n}\n/**\n * Generate a new population of birds based on fitness.\n * @param {Array} oldBirds Array of Birds from previous generation\n * */\n\nfunction generate(oldBirds) {\n  return oldBirds.map(function (bird) {\n    return poolSelection(oldBirds);\n  });\n}\n/**\n * The more ticks a bird lasts, it has exponentially (^25) higher score. Divide\n * each birds' score by sum of all combined bird fitness scores.\n * @param {Array} birds\n * @returns Value between 0 and 1.\n */\n\n\nfunction normalizeFitness(birds) {\n  birds.forEach(function (bird) {\n    return bird.score = Math.pow(bird.score, 25);\n  });\n  var sum = 0;\n  birds.forEach(function (bird) {\n    return sum += bird.score;\n  }); // Add up all the scores\n\n  birds.forEach(function (bird) {\n    return bird.fitness = bird.score / sum;\n  }); // Divide by the sum\n}\n/**\n * Randomly select bird from list of all birds, but higher fitness scores have\n * higher likeliness to be selected.\n * @param {Array} birds\n * @returns New bird which is a copy of selected bird, with mutated hidden layer.\n */\n\n\nfunction poolSelection(birds) {\n  var index = 0,\n      r = Math.random(1);\n\n  while (r > 0) {\n    r -= birds[index++].fitness;\n  } // And move on to the next\n\n\n  return birds[index - 1].copy();\n}\n\n//# sourceURL=webpack:///./src/js/index.js?");

/***/ })

/******/ });