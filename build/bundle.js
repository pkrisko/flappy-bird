/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/js/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/js/AllPipes.js":
/*!****************************!*\
  !*** ./src/js/AllPipes.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Pipe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Pipe */ \"./src/js/Pipe.js\");\n/* harmony import */ var _Queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Queue */ \"./src/js/Queue.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar distanceBetweenPipes = 220;\n\nvar AllPipes =\n/*#__PURE__*/\nfunction () {\n  function AllPipes() {\n    _classCallCheck(this, AllPipes);\n\n    this.pipes = new _Queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n\n    for (var idx = 1.5; idx < 10; idx++) {\n      this.pipes.enqueue(new _Pipe__WEBPACK_IMPORTED_MODULE_0__[\"default\"]((idx + .5) * distanceBetweenPipes));\n    }\n  }\n\n  _createClass(AllPipes, [{\n    key: \"tick\",\n    value: function tick() {\n      var curPipe = this.pipes.head;\n\n      while (curPipe) {\n        curPipe.data.tick();\n        curPipe = curPipe.next;\n      }\n\n      if (this.pipes.head.data.x < -this.pipes.head.data.pipeWidth) {\n        this.pipes.enqueue(new _Pipe__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.pipes.tail.data.x + distanceBetweenPipes));\n        this.pipes.dequeue();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var curPipe = this.pipes.head;\n\n      while (curPipe) {\n        curPipe.data.render();\n        curPipe = curPipe.next;\n      }\n    }\n  }]);\n\n  return AllPipes;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AllPipes);\n\n//# sourceURL=webpack:///./src/js/AllPipes.js?");

/***/ }),

/***/ "./src/js/Bird.js":
/*!************************!*\
  !*** ./src/js/Bird.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _NeuralNetwork__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NeuralNetwork */ \"./src/js/NeuralNetwork.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n //Create image\n\nvar img = document.createElement('IMG'); // img.setAttribute('src', 'https://www.pngkey.com/png/full/50-502247_flappy-bird-no-background.png');\n\nimg.setAttribute('src', 'img/blue-bird.png'); //Other Static variables\n\nvar gravity = 0.8;\nvar toRadians = Math.PI / 360;\n\nfunction constrainRange(value, start1, stop1, start2, stop2) {\n  var range1 = stop1 - start1;\n  var range2 = stop2 - start2;\n  var relativePosition = (value - start1) / range1; // 10\n\n  return relativePosition * range2 + start2;\n}\n\nfunction sigmoid(t) {\n  return 1 / (1 + Math.pow(Math.E, -t));\n} // Standard Normal variate using Box-Muller transform.\n\n\nfunction randomBoxMuller() {\n  var u = 0,\n      v = 0;\n\n  while (u === 0) {\n    u = Math.random();\n  } //Converting [0,1) to (0,1)\n\n\n  while (v === 0) {\n    v = Math.random();\n  }\n\n  var num = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);\n  num = num / 10.0 + 0.5; // Translate to 0 -> 1\n\n  return num > 1 || num < 0 ? randomBoxMuller() : num; // resample between 0 and 1\n} // Mutation function to be passed into bird.brain\n\n\nfunction mutate(x) {\n  if (Math.random(1) < 1 - sigmoid(currGeneration / 4.2)) {\n    // this number 4.5 mess around with this.\n    var offset = randomBoxMuller() * 0.5;\n    var newx = x + offset;\n    return newx;\n  } else {\n    return x;\n  }\n}\n\nvar Bird =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Constructor with default values of 50 for x and y.\n   * @param {number} x\n   * @param {mumber} y\n   */\n  function Bird(brain) {\n    _classCallCheck(this, Bird);\n\n    this.x = 20;\n    this.y = height / 2;\n    this.imgHeight = 30;\n    this.imgWidth = 40;\n    this.yMax = height - this.imgHeight;\n    this.lift = -25;\n    this.velocity = 0;\n    this.hitboxCoords = {\n      topLeft: {\n        x: 0,\n        y: 0\n      },\n      topRight: {\n        x: 0,\n        y: 0\n      },\n      bottomRight: {\n        x: 0,\n        y: 0\n      },\n      bottomLeft: {\n        x: 0,\n        y: 0\n      } // Is this a copy of another Bird or a new one?\n      // The Neural Network is the bird's \"brain\"\n\n    };\n\n    if (brain instanceof _NeuralNetwork__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n      this.brain = brain.copy();\n      this.brain.mutate(mutate);\n    } else {\n      this.brain = new _NeuralNetwork__WEBPACK_IMPORTED_MODULE_0__[\"default\"](11, 11, 2);\n    } // Score is how many frames it's been alive\n\n\n    this.score = 0; // Fitness is normalized version of score\n\n    this.fitness = 0;\n  }\n\n  _createClass(Bird, [{\n    key: \"copy\",\n    value: function copy() {\n      return new Bird(this.brain);\n    } // This is the key function now that decides\n    // if it should jump or not jump!\n\n  }, {\n    key: \"think\",\n    value: function think(pipes) {\n      var headData = pipes.head.data,\n          secondData = pipes.head.next.data,\n          beforeLeftFirstPipe; // if (x is true) ? then execute this : else this\n      // need to calculate topy and bottom y of next 3 vertical lines with pipe\n\n      var closest = beforeLeftFirstPipe ? headData : {\n        x: headData.x + 80,\n        yTop: headData.yTop,\n        yBottom: headData.yBottom\n      };\n      var secondClosest = beforeLeftFirstPipe ? {\n        x: headData.x + 80,\n        yTop: headData.yTop,\n        yBottom: headData.yBottom\n      } : secondData;\n      var thirdClosest = beforeLeftFirstPipe ? secondData : {\n        x: secondData.x + 80,\n        yTop: secondData.yTop,\n        yBottom: secondData.yBottom\n      }; // Now create the inputs to the neural network\n\n      var inputs = []; // x position of closest pipe\n\n      inputs[0] = constrainRange(closest.x, this.x, width, 0, 1); // top of closest pipe opening\n\n      inputs[1] = constrainRange(closest.yTop, 0, height, 0, 1); // bottom of closest pipe opening\n\n      inputs[2] = constrainRange(closest.yBottom, 0, height, 0, 1); // x position of second closest pipe\n\n      inputs[3] = constrainRange(secondClosest.x, this.x, width, 0, 1); // top of second closest pipe opening\n\n      inputs[4] = constrainRange(secondClosest.yTop, 0, height, 0, 1); // bottom of second closest pipe opening\n\n      inputs[5] = constrainRange(secondClosest.yBottom, 0, height, 0, 1); // x position of second closest pipe\n\n      inputs[6] = constrainRange(thirdClosest.x, this.x, width, 0, 1); // top of second closest pipe opening\n\n      inputs[7] = constrainRange(thirdClosest.yTop, 0, height, 0, 1); // bottom of second closest pipe opening\n\n      inputs[8] = constrainRange(thirdClosest.yBottom, 0, height, 0, 1); // bird's y position\n\n      inputs[9] = constrainRange(this.y, 0, height, 0, 1); // bird's y velocity\n\n      inputs[10] = constrainRange(this.velocity, -10, 10, 0, 1); // Get the outputs from the network\n\n      var action = this.brain.predict(inputs); // Decide to jump or not!\n\n      if (action[1] > action[0]) {\n        this.flyUp();\n      }\n    }\n  }, {\n    key: \"flyUp\",\n    value: function flyUp() {\n      if (this.velocity > 5) {\n        // Falling down fast\n        this.velocity += -21;\n      } else {\n        // falling down slow or going up\n        this.velocity += -10;\n      }\n    }\n    /**\n     * Add gravity, and then check to see if hitting wall. Don't let the bird\n     * fly out of bounds.\n     */\n\n  }, {\n    key: \"tick\",\n    value: function tick() {\n      this.score++;\n      this.velocity += gravity;\n      this.y += this.velocity; // if (this.y >= this.yMax) // TODO: Add gameover condition\n      //     this.y = this.yMax;\n\n      if (this.y <= 0) this.y = 0;\n    }\n  }, {\n    key: \"getRotationAngle\",\n    value: function getRotationAngle() {\n      var number = Math.min(Math.max(parseInt(this.velocity), -12), 6);\n      return toRadians * number * 12;\n    }\n    /**\n     * Draw a flappy ol' bird at the current position\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var centerX = this.x + this.imgWidth / 2,\n          centerY = this.y + this.imgHeight / 2;\n      context.save();\n      context.translate(centerX, centerY);\n      context.rotate(this.getRotationAngle());\n      context.drawImage(img, 0, 0, this.imgWidth, this.imgHeight);\n      context.restore();\n    }\n  }]);\n\n  return Bird;\n}(); // Lets this be used by other files.\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Bird);\n\n//# sourceURL=webpack:///./src/js/Bird.js?");

/***/ }),

/***/ "./src/js/Matrix.js":
/*!**************************!*\
  !*** ./src/js/Matrix.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// https://github.com/CodingTrain/Toy-Neural-Network-JS/blob/master/lib/matrix.js\nvar Matrix =\n/*#__PURE__*/\nfunction () {\n  function Matrix(rows, cols) {\n    var _this = this;\n\n    _classCallCheck(this, Matrix);\n\n    this.rows = rows;\n    this.cols = cols;\n    this.data = Array(this.rows).fill().map(function () {\n      return Array(_this.cols).fill(0);\n    });\n  }\n\n  _createClass(Matrix, [{\n    key: \"copy\",\n    value: function copy() {\n      var m = new Matrix(this.rows, this.cols);\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.cols; j++) {\n          m.data[i][j] = this.data[i][j];\n        }\n      }\n\n      return m;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var arr = [];\n\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.cols; j++) {\n          arr.push(this.data[i][j]);\n        }\n      }\n\n      return arr;\n    }\n  }, {\n    key: \"randomize\",\n    value: function randomize() {\n      return this.map(function (e) {\n        return Math.random() * 2 - 1;\n      });\n    }\n  }, {\n    key: \"add\",\n    value: function add(n) {\n      if (n instanceof Matrix) {\n        if (this.rows !== n.rows || this.cols !== n.cols) {\n          console.log('Columns and Rows of A must match Columns and Rows of B.');\n          return;\n        }\n\n        return this.map(function (e, i, j) {\n          return e + n.data[i][j];\n        });\n      } else {\n        return this.map(function (e) {\n          return e + n;\n        });\n      }\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(n) {\n      if (n instanceof Matrix) {\n        if (this.rows !== n.rows || this.cols !== n.cols) {\n          console.log('Columns and Rows of A must match Columns and Rows of B.');\n          return;\n        } // hadamard product\n\n\n        return this.map(function (e, i, j) {\n          return e * n.data[i][j];\n        });\n      } else {\n        // Scalar product\n        return this.map(function (e) {\n          return e * n;\n        });\n      }\n    }\n  }, {\n    key: \"map\",\n    value: function map(func) {\n      // Apply a function to every element of matrix\n      for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.cols; j++) {\n          var val = this.data[i][j];\n          this.data[i][j] = func(val, i, j);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"print\",\n    value: function print() {\n      console.table(this.data);\n      return this;\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize() {\n      return JSON.stringify(this);\n    }\n  }], [{\n    key: \"fromArray\",\n    value: function fromArray(arr) {\n      return new Matrix(arr.length, 1).map(function (e, i) {\n        return arr[i];\n      });\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract(a, b) {\n      if (a.rows !== b.rows || a.cols !== b.cols) {\n        console.log('Columns and Rows of A must match Columns and Rows of B.');\n        return;\n      } // Return a new Matrix a-b\n\n\n      return new Matrix(a.rows, a.cols).map(function (_, i, j) {\n        return a.data[i][j] - b.data[i][j];\n      });\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose(matrix) {\n      return new Matrix(matrix.cols, matrix.rows).map(function (_, i, j) {\n        return matrix.data[j][i];\n      });\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(a, b) {\n      // Matrix product\n      if (a.cols !== b.rows) {\n        console.log('Columns of A must match rows of B.');\n        return;\n      }\n\n      return new Matrix(a.rows, b.cols).map(function (e, i, j) {\n        // Dot product of values in col\n        var sum = 0;\n\n        for (var k = 0; k < a.cols; k++) {\n          sum += a.data[i][k] * b.data[k][j];\n        }\n\n        return sum;\n      });\n    }\n  }, {\n    key: \"map\",\n    value: function map(matrix, func) {\n      // Apply a function to every element of matrix\n      return new Matrix(matrix.rows, matrix.cols).map(function (e, i, j) {\n        return func(matrix.data[i][j], i, j);\n      });\n    }\n  }, {\n    key: \"deserialize\",\n    value: function deserialize(data) {\n      if (typeof data == 'string') {\n        data = JSON.parse(data);\n      }\n\n      var matrix = new Matrix(data.rows, data.cols);\n      matrix.data = data.data;\n      return matrix;\n    }\n  }]);\n\n  return Matrix;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Matrix);\n\n//# sourceURL=webpack:///./src/js/Matrix.js?");

/***/ }),

/***/ "./src/js/NeuralNetwork.js":
/*!*********************************!*\
  !*** ./src/js/NeuralNetwork.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Matrix */ \"./src/js/Matrix.js\");\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n // https://github.com/CodingTrain/Toy-Neural-Network-JS/blob/master/lib/nn.js\n// Other techniques for learning\n\nvar ActivationFunction = function ActivationFunction(func, dfunc) {\n  _classCallCheck(this, ActivationFunction);\n\n  this.func = func;\n  this.dfunc = dfunc;\n};\n\nvar sigmoid = new ActivationFunction(function (x) {\n  return 1 / (1 + Math.exp(-x));\n}, function (y) {\n  return y * (1 - y);\n});\nvar tanh = new ActivationFunction(function (x) {\n  return Math.tanh(x);\n}, function (y) {\n  return 1 - y * y;\n});\n\nvar NeuralNetwork =\n/*#__PURE__*/\nfunction () {\n  /*\n  * if first argument is a NeuralNetwork the constructor clones it\n  * USAGE: cloned_nn = new NeuralNetwork(to_clone_nn);\n  */\n  function NeuralNetwork(in_nodes, hid_nodes, out_nodes) {\n    _classCallCheck(this, NeuralNetwork);\n\n    if (in_nodes instanceof NeuralNetwork) {\n      var a = in_nodes;\n      this.input_nodes = a.input_nodes;\n      this.hidden_nodes = a.hidden_nodes;\n      this.output_nodes = a.output_nodes;\n      this.weights_ih = a.weights_ih.copy();\n      this.weights_ho = a.weights_ho.copy();\n      this.bias_h = a.bias_h.copy();\n      this.bias_o = a.bias_o.copy();\n    } else {\n      this.input_nodes = in_nodes;\n      this.hidden_nodes = hid_nodes;\n      this.output_nodes = out_nodes;\n      this.weights_ih = new _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.hidden_nodes, this.input_nodes);\n      this.weights_ho = new _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.output_nodes, this.hidden_nodes);\n      this.weights_ih.randomize();\n      this.weights_ho.randomize();\n      this.bias_h = new _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.hidden_nodes, 1);\n      this.bias_o = new _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.output_nodes, 1);\n      this.bias_h.randomize();\n      this.bias_o.randomize();\n    } // TODO: copy these as well\n\n\n    this.setLearningRate();\n    this.setActivationFunction();\n  }\n\n  _createClass(NeuralNetwork, [{\n    key: \"predict\",\n    value: function predict(input_array) {\n      // Generating the Hidden Outputs\n      var inputs = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].fromArray(input_array);\n      var hidden = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this.weights_ih, inputs);\n      hidden.add(this.bias_h); // activation function!\n\n      hidden.map(this.activation_function.func); // Generating the output's output!\n\n      var output = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this.weights_ho, hidden);\n      output.add(this.bias_o);\n      output.map(this.activation_function.func); // Sending back to the caller!\n\n      return output.toArray();\n    }\n  }, {\n    key: \"setLearningRate\",\n    value: function setLearningRate() {\n      var learning_rate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0.1;\n      this.learning_rate = learning_rate;\n    }\n  }, {\n    key: \"setActivationFunction\",\n    value: function setActivationFunction() {\n      var func = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : sigmoid;\n      this.activation_function = func;\n    }\n  }, {\n    key: \"train\",\n    value: function train(input_array, target_array) {\n      // Generating the Hidden Outputs\n      var inputs = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].fromArray(input_array);\n      var hidden = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this.weights_ih, inputs);\n      hidden.add(this.bias_h); // activation function!\n\n      hidden.map(this.activation_function.func); // Generating the output's output!\n\n      var outputs = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(this.weights_ho, hidden);\n      outputs.add(this.bias_o);\n      outputs.map(this.activation_function.func); // Convert array to matrix object\n\n      var targets = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].fromArray(target_array); // Calculate the error\n      // ERROR = TARGETS - OUTPUTS\n\n      var output_errors = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].subtract(targets, outputs); // let gradient = outputs * (1 - outputs);\n      // Calculate gradient\n\n      var gradients = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(outputs, this.activation_function.dfunc);\n      gradients.multiply(output_errors);\n      gradients.multiply(this.learning_rate); // Calculate deltas\n\n      var hidden_T = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transpose(hidden);\n      var weight_ho_deltas = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(gradients, hidden_T); // Adjust the weights by deltas\n\n      this.weights_ho.add(weight_ho_deltas); // Adjust the bias by its deltas (which is just the gradients)\n\n      this.bias_o.add(gradients); // Calculate the hidden layer errors\n\n      var who_t = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transpose(this.weights_ho);\n      var hidden_errors = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(who_t, output_errors); // Calculate hidden gradient\n\n      var hidden_gradient = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(hidden, this.activation_function.dfunc);\n      hidden_gradient.multiply(hidden_errors);\n      hidden_gradient.multiply(this.learning_rate); // Calcuate input->hidden deltas\n\n      var inputs_T = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].transpose(inputs);\n      var weight_ih_deltas = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].multiply(hidden_gradient, inputs_T);\n      this.weights_ih.add(weight_ih_deltas); // Adjust the bias by its deltas (which is just the gradients)\n\n      this.bias_h.add(hidden_gradient);\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize() {\n      return JSON.stringify(this);\n    }\n  }, {\n    key: \"copy\",\n    // Adding function for neuro-evolution\n    value: function copy() {\n      return new NeuralNetwork(this);\n    } // Accept an arbitrary function for mutation\n\n  }, {\n    key: \"mutate\",\n    value: function mutate(func) {\n      this.weights_ih.map(func);\n      this.weights_ho.map(func);\n      this.bias_h.map(func);\n      this.bias_o.map(func);\n    }\n  }], [{\n    key: \"deserialize\",\n    value: function deserialize(data) {\n      if (typeof data == \"string\") {\n        data = JSON.parse(data);\n      }\n\n      var nn = new NeuralNetwork(data.input_nodes, data.hidden_nodes, data.output_nodes);\n      nn.weights_ih = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deserialize(data.weights_ih);\n      nn.weights_ho = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deserialize(data.weights_ho);\n      nn.bias_h = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deserialize(data.bias_h);\n      nn.bias_o = _Matrix__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deserialize(data.bias_o);\n      nn.learning_rate = data.learning_rate;\n      return nn;\n    }\n  }]);\n\n  return NeuralNetwork;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (NeuralNetwork);\n\n//# sourceURL=webpack:///./src/js/NeuralNetwork.js?");

/***/ }),

/***/ "./src/js/Pipe.js":
/*!************************!*\
  !*** ./src/js/Pipe.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar spaceBetweenPipe = 180;\nvar distanceOffWall = 120;\nvar img = document.createElement('IMG');\nimg.setAttribute('src', 'img/pipe.png');\n\nfunction generateRandomSpawns() {\n  var randY = Math.random() * (height - 2 * distanceOffWall - spaceBetweenPipe) + distanceOffWall;\n  return {\n    yTop: randY,\n    yBottom: randY + spaceBetweenPipe\n  };\n}\n\nvar Pipe =\n/*#__PURE__*/\nfunction () {\n  function Pipe(x) {\n    _classCallCheck(this, Pipe);\n\n    this.x = x;\n\n    var _generateRandomSpawns = generateRandomSpawns(),\n        yTop = _generateRandomSpawns.yTop,\n        yBottom = _generateRandomSpawns.yBottom;\n\n    this.yTop = yTop;\n    this.yBottom = yBottom;\n    this.pipeWidth = 80;\n  }\n\n  _createClass(Pipe, [{\n    key: \"tick\",\n    value: function tick() {\n      this.x -= 3;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var centerX = this.x + this.pipeWidth / 2;\n      context.save();\n      context.translate(this.x, this.yTop);\n      context.scale(-1, 1);\n      context.rotate(Math.PI);\n      context.drawImage(img, 0, 0, this.pipeWidth, 500);\n      context.restore();\n      context.drawImage(img, this.x, this.yBottom, this.pipeWidth, 500);\n    }\n  }]);\n\n  return Pipe;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Pipe);\n\n//# sourceURL=webpack:///./src/js/Pipe.js?");

/***/ }),

/***/ "./src/js/Queue.js":
/*!*************************!*\
  !*** ./src/js/Queue.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Node = function Node(data, prev, next) {\n  _classCallCheck(this, Node);\n\n  this.data = data;\n  this.prev = prev;\n  this.next = next;\n};\n\nvar Queue =\n/*#__PURE__*/\nfunction () {\n  function Queue() {\n    _classCallCheck(this, Queue);\n\n    this.head;\n    this.tail;\n    this.size = 0;\n  }\n  /**\n   * Add to the end\n   * @param {*} data a Poipe\n   */\n\n\n  _createClass(Queue, [{\n    key: \"enqueue\",\n    value: function enqueue(data) {\n      this.size++;\n\n      if (!this.tail) {\n        var newNode = new Node(data, null, null);\n        this.head = newNode;\n        this.tail = newNode;\n      } else {\n        var _newNode = new Node(data, this.tail, null);\n\n        this.tail.next = _newNode;\n        this.tail = _newNode;\n      }\n    }\n    /**\n     * Remove from the front\n     */\n\n  }, {\n    key: \"dequeue\",\n    value: function dequeue() {\n      if (!this.head) return; // empty\n\n      this.size--;\n\n      if (this.head === this.tail) {\n        // one element\n        this.head = undefined; // check with null\n\n        this.tail = undefined; // check with null\n\n        return;\n      }\n\n      this.head = this.head.next;\n      this.head.prev = undefined;\n    }\n  }]);\n\n  return Queue;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Queue);\n\n//# sourceURL=webpack:///./src/js/Queue.js?");

/***/ }),

/***/ "./src/js/index.js":
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
/*! exports provided: nextGeneration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"nextGeneration\", function() { return nextGeneration; });\n/* harmony import */ var _Bird__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Bird */ \"./src/js/Bird.js\");\n/* harmony import */ var _AllPipes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AllPipes */ \"./src/js/AllPipes.js\");\n\n // Global variables\n\nwindow.canvas = document.getElementById('canvas');\nwindow.context = canvas.getContext(\"2d\");\nwindow.height = window.innerHeight;\nwindow.width = window.innerWidth;\nwindow.currGeneration = 1; // File scoped variables\n\nvar maxFPS = 120; // set to 10 and watch what happens\n\nvar backgroundImg = document.createElement('IMG');\nbackgroundImg.setAttribute('src', 'http://blog.itselectlab.com/wp-content/uploads/background.png'); // let bird;\n\nvar allPipes;\nvar score = 0;\nvar highScore = 0;\nvar lastFrameTimeMs = 0; // How big is the population\n\nvar totalPopulation = 4000; // All active birds (not yet collided with pipe)\n\nvar activeBirds = []; // All birds for any given population\n\nvar allBirds = [];\n\nfunction setup() {\n  // Create a population\n  for (var i = 0; i < totalPopulation; i++) {\n    var bird = new _Bird__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n    activeBirds[i] = bird;\n    allBirds[i] = bird;\n  }\n\n  allPipes = new _AllPipes__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n  window.requestAnimationFrame(mainLoop);\n}\n\nsetup();\n/**\n * Heartbeat of the game. Update and draw the game 60 times a second.\n * @param {*} timestamp\n */\n\nfunction mainLoop(timestamp) {\n  // const progress = timestamp - lastFrameTimeMs;\n  if (timestamp < lastFrameTimeMs + 1000 / maxFPS) {\n    window.requestAnimationFrame(mainLoop);\n    return;\n  }\n\n  lastFrameTimeMs = timestamp;\n  tick(); // update game state FIRST\n\n  if (activeBirds.length > 0) {\n    var firstBird = activeBirds[0];\n    if (firstBird.fitness % 2 == 0) render();\n  } else {\n    render();\n  }\n\n  window.requestAnimationFrame(mainLoop);\n}\n\nfunction touchingPipe(bird, pipe) {\n  var xIsIntersecting = bird.x - 7.5 + bird.imgWidth >= pipe.x && bird.x - 7.5 + bird.imgWidth <= pipe.x + pipe.pipeWidth,\n      yIsIntersecting = bird.y + 11 < pipe.yTop || bird.y + 23 + bird.imgHeight > pipe.yBottom;\n  return xIsIntersecting && yIsIntersecting;\n}\n\nfunction isDead(bird) {\n  var firstPipe = allPipes.pipes.head.data,\n      secondPipe = allPipes.pipes.head.next.data; // If bird is fallen through map, or touching a pipe.\n\n  return bird.y + bird.imgHeight > height || touchingPipe(bird, firstPipe) || touchingPipe(bird, secondPipe);\n}\n/**\n * Update the current state of the game\n * @param {*} progress\n */\n\n\nfunction tick() {\n  if (activeBirds.length > 0) {\n    var firstBird = activeBirds[0];\n\n    if (Math.abs(firstBird.x + firstBird.imgWidth - (allPipes.pipes.head.data.x + allPipes.pipes.head.data.pipeWidth)) < 2) {\n      score++;\n      if (score >= highScore) highScore = score;\n\n      if (score % 5 == 0) {\n        var numBirds = activeBirds.length;\n        console.log(\"\\t\\u2022 \".concat(score, \" Birds Alive: \").concat(numBirds, \" (%\").concat((numBirds / 5000 * 100).toFixed(2), \")\"));\n      }\n    }\n  } else {\n    nextGeneration();\n  }\n\n  for (var i = activeBirds.length - 1; i >= 0; i--) {\n    var bird = activeBirds[i]; // Bird uses its brain!\n\n    bird.think(allPipes.pipes);\n    bird.tick();\n\n    if (isDead(bird)) {\n      activeBirds.splice(i, 1);\n    }\n  }\n\n  allPipes.tick();\n}\n/**\n * Draw the current state of the world.\n */\n\n\nfunction render() {\n  context.drawImage(backgroundImg, 0, 0, width, height);\n\n  for (var idx = 0; idx < 2 && idx < activeBirds.length; idx++) {\n    activeBirds[idx].render();\n  } // activeBirds.forEach(bird => bird.render());\n\n\n  allPipes.render();\n  context.font = '48px sans-serif';\n  context.fillStyle = \"#fff\";\n  context.fillText(score, width - 150, 80);\n  context.font = '24px sans-serif';\n  context.fillText(\"Gen: \".concat(currGeneration), width - 150, 30);\n  context.fillText(\"\".concat(activeBirds.length, \" birds\"), width - 150, 110);\n  context.fillText(\"Top: \".concat(highScore), width - 150, 140);\n} // Listen for clicks on desktop. touchstart on mobile\n\n\nwindow.addEventListener('keyup', function (event) {// if (event.keyCode === 32) // Spacebar\n  //     bird.flyUp();\n});\nwindow.addEventListener('touchstart', function () {// bird.flyUp();\n}); // resize the canvas to fill browser window dynamically\n\nwindow.addEventListener('resize', resizeCanvas, false);\n\nfunction resizeCanvas() {\n  canvas.width = width;\n  canvas.height = height;\n}\n\nresizeCanvas(); // var audio = new Audio('http://files2.earmilk.com/upload/mp3/2012-04/Theophilus%20London%20Ft%20ASAP%20Rocky-Big%20Spender.mp3?_ga=2.259002762.1018058977.1556944267-758562653.1556944266');\n// setTimeout(() => {\n//     // audio.play();\n// }, 500);\n// Code for creating new generations..\n// Start the game over\n\nfunction resetGame() {\n  // counter = 0;\n  // Resetting best bird score to 0\n  // if (bestBird) {\n  //     bestBird.score = 0;\n  // }\n  console.log(\"Generation: \".concat(currGeneration, \" Score: \").concat(score));\n  currGeneration++;\n  score = 0;\n  allPipes = new _AllPipes__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n  window.requestAnimationFrame(mainLoop);\n} // Create the next generation\n\n\nfunction nextGeneration() {\n  resetGame(); // Normalize the fitness values 0-1\n\n  normalizeFitness(allBirds); // Generate a new set of birds\n\n  activeBirds = generate(allBirds); // Copy those birds to another array\n\n  allBirds = activeBirds.slice();\n} // Generate a new population of birds\n\nfunction generate(oldBirds) {\n  var newBirds = [];\n\n  for (var i = 0; i < oldBirds.length; i++) {\n    // Select a bird based on fitness\n    var bird = poolSelection(oldBirds);\n    newBirds[i] = bird;\n  }\n\n  return newBirds;\n} // Normalize the fitness of all birds\n\n\nfunction normalizeFitness(birds) {\n  // Good for first generations, but might need to limit this above a certain score threshold.\n  birds.forEach(function (bird) {\n    return bird.score = Math.pow(bird.score, 25);\n  }); // Add up all the scores\n\n  var sum = 0;\n  birds.forEach(function (bird) {\n    return sum += bird.score;\n  }); // Divide by the sum\n\n  birds.forEach(function (bird) {\n    return bird.fitness = bird.score / sum;\n  });\n} // An algorithm for picking one bird from an array based on fitness\n\n\nfunction poolSelection(birds) {\n  var index = 0;\n  var r = Math.random(1); // Pick a random number between 0 and 1\n  // Keep subtracting probabilities until you get less than zero\n  // Higher probabilities will be more likely to be fixed since they will\n  // subtract a larger number towards zero\n\n  while (r > 0) {\n    r -= birds[index].fitness; // And move on to the next\n\n    index += 1;\n  } // Go back one\n\n\n  index -= 1; // Make sure it's a copy!\n  // (this includes mutation)\n\n  return birds[index].copy();\n}\n\n//# sourceURL=webpack:///./src/js/index.js?");

/***/ })

/******/ });